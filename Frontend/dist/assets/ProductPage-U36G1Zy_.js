import{d as r,j as e,I as M}from"./index-CE9WmyD7.js";import{a as R}from"./index-xsH4HHeE.js";import{P as T}from"./productService-DyNiEK05.js";import{P as B}from"./ProductCart-f4R11DRB.js";import{S as I}from"./Slider-QhYUKXJh.js";import{B as w}from"./Button-CY8DMP3B.js";import{R as O,F as P,a as C}from"./RadioGroup-8FUCRh9f.js";import{T as D}from"./TextField-D6R_Exqu.js";import"./Select-BURDMod_.js";const A="http://localhost:3000/api/category",_={getCategories:async()=>{try{const s=await R.get(`${A}/get`);if(!s||!s.data)throw new Error("No data received from the server");return s.data}catch(s){throw console.error("Error fetching categories:",s),s}}};function Q(){const[s,p]=r.useState([1e3,1e7]),[o,f]=r.useState([1e3,1e7]),[i,b]=r.useState(""),[S,F]=r.useState([]),[x,k]=r.useState(""),[j,E]=r.useState([]),[m,v]=r.useState([]),[l,h]=r.useState(1),g=8,y=l*g,z=y-g,N=m.slice(z,y),n=Math.ceil(m.length/g),u=t=>h(t),L=()=>{f(s),h(1)},d=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")+"đ";return r.useEffect(()=>{const t=async()=>{try{const c=await _.getCategories();F(c)}catch(c){console.error("Lỗi khi lấy danh mục:",c)}},a=async()=>{try{const c=await T.getProducts();E(c),v(c)}catch(c){console.error("Lỗi khi lấy sản phẩm:",c)}};t(),a()},[]),r.useEffect(()=>{let t=[...j];x&&(t=t.filter(a=>a.productName.toLowerCase().includes(x.toLowerCase()))),i&&(t=t.filter(a=>a.category&&a.category.categoryName===i)),t=t.filter(a=>a.price>=o[0]&&a.price<=o[1]),v(t),h(1)},[x,i,o,j]),e.jsx("div",{className:"bg-white font-sans text-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("aside",{className:"flex-shrink-0 w-full md:w-60 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[e.jsx("h3",{className:"text-sm font-semibold text-[#1E1E4F] mb-2",children:"Lọc theo giá"}),e.jsxs("div",{className:"text-xs text-gray-500 flex justify-between mb-1",children:[e.jsx("span",{children:d(s[0])}),e.jsx("span",{children:d(s[1])})]}),e.jsx(I,{value:s,onChange:(t,a)=>p(a),min:1e3,max:1e7,valueLabelDisplay:"auto",valueLabelFormat:d,"aria-label":"Thanh trượt khoảng giá",sx:{color:"#f97316","& .MuiSlider-thumb":{width:16,height:16,bgcolor:"#f97316",borderRadius:"50%"}}}),e.jsx(w,{variant:"contained",fullWidth:!0,onClick:L,sx:{mt:2,bgcolor:"#f97316","&:hover":{bgcolor:"#ea580c"},textTransform:"none",fontSize:"0.75rem"},children:"ÁP DỤNG"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[e.jsx("h3",{className:"text-sm font-semibold text-[#1E1E4F] mb-3",children:"Danh mục sản phẩm"}),e.jsxs(O,{value:i,onChange:t=>b(t.target.value),className:"text-xs text-[#F97316] space-y-2",children:[e.jsx(P,{value:"",control:e.jsx(C,{size:"small",sx:{color:"#f97316","&.Mui-checked":{color:"#f97316"}}}),label:"Tất cả",sx:{"& .MuiFormControlLabel-label":{fontSize:"0.75rem"}}}),S.map(t=>e.jsx(P,{value:t.categoryName,control:e.jsx(C,{size:"small",sx:{color:"#f97316","&.Mui-checked":{color:"#f97316"}}}),label:t.categoryName,sx:{"& .MuiFormControlLabel-label":{fontSize:"0.75rem"}}},t._id))]})]}),e.jsxs("div",{className:"relative w-full h-48 rounded-lg overflow-hidden shadow",children:[e.jsx("img",{alt:"Bản đồ hiển thị vị trí với các điểm đánh dấu đỏ",className:"w-full h-full object-cover",src:"https://storage.googleapis.com/a1aa/image/ef2cd366-a061-4bc9-ba96-3437024a732c.jpg",width:"240",height:"192"}),e.jsx("div",{className:"absolute top-1 left-1 bg-black bg-opacity-70 text-white text-xs px-2 py-0.5 rounded",children:"Bản đồ"})]})]}),e.jsxs("main",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 mb-6",children:[e.jsx("div",{className:"relative flex-1 max-w-md w-full",children:e.jsx(D,{fullWidth:!0,placeholder:"Tìm kiếm sản phẩm...",variant:"outlined",size:"small",value:x,onChange:t=>k(t.target.value),InputProps:{endAdornment:e.jsx(M,{"aria-label":"Tìm kiếm",children:e.jsx("i",{className:"fas fa-search text-[#F97316]"})}),sx:{borderRadius:"0.375rem","& .MuiOutlinedInput-notchedOutline":{borderColor:"#f97316"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#f97316"},fontSize:"0.75rem",color:"#1E1E4F"}},sx:{"& .MuiInputBase-input::placeholder":{color:"#f97316",opacity:1}}})}),e.jsx(w,{variant:"contained",sx:{bgcolor:"#f97316","&:hover":{bgcolor:"#ea580c"},textTransform:"none",fontSize:"0.75rem",px:4,py:1},children:"Tìm kiếm"})]}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Bộ lọc:"}),o[0]!==1e3||o[1]!==1e7?e.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:["Giá: ",d(o[0])," - ",d(o[1])]}):null,i&&e.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:["Danh mục: ",i]}),(o[0]!==1e3||o[1]!==1e7||i)&&e.jsx("button",{onClick:()=>{b(""),p([1e3,1e7]),f([1e3,1e7])},className:"text-xs text-orange-600 hover:text-orange-800",children:"Xóa tất cả"})]}),e.jsxs("h2",{className:"text-lg font-bold text-[#1E1E4F] mb-4",children:["Sản phẩm (",m.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:N.length>0?N.map(t=>e.jsx(B,{product:t,widthCard:200,heightCard:300,heightImage:150,textSizeName:14,textSizeDescription:12,textSizePrice:14,buttonSize:36},t._id)):e.jsx("p",{className:"text-sm text-gray-600 col-span-full text-center",children:"Không tìm thấy sản phẩm nào phù hợp với bộ lọc."})}),n>1&&e.jsx("nav",{className:"flex justify-center mt-6",children:e.jsxs("ul",{className:"flex items-center space-x-1",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>u(Math.max(1,l-1)),disabled:l===1,className:`px-3 py-1 rounded-md ${l===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-orange-100"}`,children:"<"})}),Array.from({length:n},(t,a)=>a+1).map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>u(t),className:`px-3 py-1 rounded-md ${l===t?"bg-[#F97316] text-white":"text-gray-700 hover:bg-orange-100"}`,children:t})},t)),e.jsx("li",{children:e.jsx("button",{onClick:()=>u(Math.min(n,l+1)),disabled:l===n,className:`px-3 py-1 rounded-md ${l===n?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-orange-100"}`,children:">"})})]})})]})]})})})}export{Q as default};
