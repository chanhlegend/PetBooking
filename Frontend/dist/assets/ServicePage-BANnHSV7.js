import{d as l,j as e,I as C}from"./index-DqRvvWE5.js";import{S as P,a as k}from"./ServiceCard-BVyzApxh.js";import{S as E}from"./Slider-DBNAZZKM.js";import{B as S}from"./Button-B0OmE6cn.js";import{T as F}from"./TextField-ZV8lHLtJ.js";import"./index-xsH4HHeE.js";import"./Select-De476SSy.js";function O(){const[n,g]=l.useState([1e3,1e7]),[a,u]=l.useState([1e3,1e7]),[o,f]=l.useState(""),[p,N]=l.useState([]),[d,v]=l.useState([]),[r,x]=l.useState(1),h=8,i=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")+"đ",j=r*h,y=j-h,b=d.slice(y,j),c=Math.ceil(d.length/h),m=t=>x(t),w=()=>{u(n),x(1)};return l.useEffect(()=>{(async()=>{try{const s=await k.getAllServices();N(s),v(s)}catch(s){console.error("Lỗi khi lấy dịch vụ:",s)}})()},[]),l.useEffect(()=>{let t=[...p];o&&(t=t.filter(s=>s.serviceName.toLowerCase().includes(o.toLowerCase()))),t=t.filter(s=>s.priceRange>=a[0]&&s.priceRange<=a[1]),v(t),x(1)},[o,a,p]),e.jsx("div",{className:"bg-white font-sans text-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("aside",{className:"flex-shrink-0 w-full md:w-60 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[e.jsx("h3",{className:"text-sm font-semibold text-[#1E1E4F] mb-2",children:"Lọc theo giá"}),e.jsxs("div",{className:"text-xs text-gray-500 flex justify-between mb-1",children:[e.jsx("span",{children:i(n[0])}),e.jsx("span",{children:i(n[1])})]}),e.jsx(E,{value:n,onChange:(t,s)=>g(s),min:1e3,max:1e7,valueLabelDisplay:"auto",valueLabelFormat:i,"aria-label":"Thanh trượt khoảng giá",sx:{color:"#f97316","& .MuiSlider-thumb":{width:16,height:16,bgcolor:"#f97316",borderRadius:"50%"}}}),e.jsx(S,{variant:"contained",fullWidth:!0,onClick:w,sx:{mt:2,bgcolor:"#f97316","&:hover":{bgcolor:"#ea580c"},textTransform:"none",fontSize:"0.75rem"},children:"ÁP DỤNG"})]}),e.jsxs("div",{className:"relative w-full h-48 rounded-lg overflow-hidden shadow",children:[e.jsx("img",{alt:"Bản đồ hiển thị vị trí với các điểm đánh dấu đỏ",className:"w-full h-full object-cover",src:"https://storage.googleapis.com/a1aa/image/ef2cd366-a061-4bc9-ba96-3437024a732c.jpg",width:"240",height:"192"}),e.jsx("div",{className:"absolute top-1 left-1 bg-black bg-opacity-70 text-white text-xs px-2 py-0.5 rounded",children:"Bản đồ"})]})]}),e.jsxs("main",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 mb-6",children:[e.jsx("div",{className:"relative flex-1 max-w-md w-full",children:e.jsx(F,{fullWidth:!0,placeholder:"Tìm kiếm dịch vụ...",variant:"outlined",size:"small",value:o,onChange:t=>f(t.target.value),InputProps:{endAdornment:e.jsx(C,{"aria-label":"Tìm kiếm",children:e.jsx("i",{className:"fas fa-search text-[#F97316]"})}),sx:{borderRadius:"0.375rem","& .MuiOutlinedInput-notchedOutline":{borderColor:"#f97316"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#f97316"},fontSize:"0.75rem",color:"#1E1E4F"}},sx:{"& .MuiInputBase-input::placeholder":{color:"#f97316",opacity:1}}})}),e.jsx(S,{variant:"contained",sx:{bgcolor:"#f97316","&:hover":{bgcolor:"#ea580c"},textTransform:"none",fontSize:"0.75rem",px:4,py:1},children:"Tìm kiếm"})]}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Bộ lọc:"}),a[0]!==1e3||a[1]!==1e7?e.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full",children:["Giá: ",i(a[0])," - ",i(a[1])]}):null,(a[0]!==1e3||a[1]!==1e7)&&e.jsx("button",{onClick:()=>{f(""),g([1e3,1e7]),u([1e3,1e7])},className:"text-xs text-orange-600 hover:text-orange-800",children:"Xóa tất cả"})]}),e.jsxs("h2",{className:"text-lg font-bold text-[#1E1E4F] mb-4",children:["Dịch Vụ (",d.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:b.length>0?b.map(t=>e.jsx(P,{service:t,widthCard:200,heightCard:320,heightImage:160,textSizeName:14,textSizeDescription:12,textSizePrice:14,buttonSize:16},t._id)):e.jsx("p",{className:"text-sm text-gray-600 col-span-full text-center",children:"Không tìm thấy dịch vụ nào phù hợp với bộ lọc."})}),c>1&&e.jsx("nav",{className:"flex justify-center mt-6",children:e.jsxs("ul",{className:"flex items-center space-x-1",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>m(Math.max(1,r-1)),disabled:r===1,className:`px-3 py-1 rounded-md ${r===1?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-orange-100"}`,children:"<"})}),Array.from({length:c},(t,s)=>s+1).map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>m(t),className:`px-3 py-1 rounded-md ${r===t?"bg-[#F97316] text-white":"text-gray-700 hover:bg-orange-100"}`,children:t})},t)),e.jsx("li",{children:e.jsx("button",{onClick:()=>m(Math.min(c,r+1)),disabled:r===c,className:`px-3 py-1 rounded-md ${r===c?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-orange-100"}`,children:">"})})]})})]})]})})})}export{O as default};
